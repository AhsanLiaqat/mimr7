<div class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
        <div id="modal-header" class="modal-header">
            <button type="button" class="close" ng-click="close()" >&times;</button>
            <h4 class="modal-title">{{heading}}</h4>
        </div>
        <div class="modal-body">
            <div class="panel panel-default">
                <div class="panel-heading">Basic Info</div>
                <div class="panel-body">
                    <div class="form-group">
                        <label >Task Name</label><span  style="color: red" title="Required"> *</span>
                        <input type="text" class="form-control" ng-model="task.title" placeholder="Enter Task Name" ng-readonly="viewTask">
                    </div>
                    <div class="form-group">
                        <label >Description</label>
                        <textarea name="" ng-model="task.description" class="form-control" rows="2" maxlength="255" ng-readonly="viewTask"></textarea>
                        <div class="message-length-warning" ng-class="{'red-text': task.description.length >= 255}">
                            <span>
                                {{task.description.length || 0}} / 255 Characters
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <button class="btn btn-primary" ng-click="toggleAdditionalInfo()">Additional Info
                </button>
            </div>

            <div class="panel panel-default" ng-show="additionalInfo">
                <div class="panel-heading">Additional Info</div>
                <div class="panel-body">
                    <div class="form-group">
                        <label >Template</label>
                        <input type="checkbox" class="" ng-model="taskInfo.for_template">
                    </div>
                    <div class="form-group">
                        <label >Author</label>
                        <input type="text" class="form-control" ng-model="taskInfo.author" placeholder="Enter Author Name" ng-readonly="viewTask">
                    </div>

                    <div class="form-group">
                        <label >Department</label>
                        <div class="form-group chosen-full-container" style="margin-bottom:10px;">
                            <select chosen
                                    data-placeholder-text-single="'Select Department'"
                                    ng-model="taskInfo.departmentId"
                                    ng-selected="record.id === taskInfo.departmentId"
                                    ng-options="record.id as record.name for record in departments"
                                    ng-disabled="viewTask">
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label >Links</label>
                        <input type="text" class="form-control" ng-model="taskInfo.links" placeholder="Enter Links" ng-readonly="viewTask">
                    </div>
                    <div class="form-group" ng-if="notEdit">
                        <label>File Name</label>
                        {{taskInfo.filename}}
                    </div>
                    <div class="form-group" ng-if="!notEdit">
                        <label>File Name</label>
                        <div class="form-group chosen-full-container" style="margin-bottom:10px;">
                            <select chosen
                                    data-placeholder-text-single="'Select Document'"
                                    ng-model="taskInfo.libId"
                                    ng-selected="taskInfo.filename === document.filename"
                                    ng-options="document.id as document.title for document in documents"
                                    ng-disabled="viewTask">
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Select Type</label>
                        <div class="form-group chosen-full-container" style="margin-bottom:10px;">
                            <select chosen
                                    data-placeholder-text-single="'Select Type'"
                                    ng-model="taskInfo.type"
                                    ng-selected="taskInfo.type === type.name"
                                    ng-options="type.name as type.name for type in types"
                                    >
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Select Category Type</label>
                        <div class="form-group chosen-full-container" style="margin-bottom:10px;">
                            <select chosen
                                    data-placeholder-text-single="'Select Category Type'"
                                    ng-model="taskInfo.categoryId"
                                    ng-options="cat.id as cat.name for cat in categories"
                                    >
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group" ng-if="addTask">
                        <label>Categories</label>
                        <tags-input class="scroll my-tags-input"
                                    name='task_tags'
                                    placeholder="Select Categories"
                                    ng-model="taskTags">
                                    <auto-complete source="getList($query)" max-results-to-show="2000" load-on-empty="true" load-on-focus="true" load-on-down-arrow="true"></auto-complete>
                        </tags-input>
                    </div>

                    <div class="form-group" ng-if="editTask">
                        <label>Categories</label>
                        <tags-input class="scroll my-tags-input"
                                    name='task_tags'
                                    placeholder="Select Categories"
                                    ng-model="taskInfo.tags">
                                    <auto-complete source="getList($query)" max-results-to-show="2000" load-on-empty="true" load-on-focus="true" load-on-down-arrow="true"></auto-complete>
                        </tags-input>
                    </div>

                    <div class="form-group" ng-if="viewTask">
                        <label>Categories</label>
                        <tags-input class="scroll"
                                    name='task_tags'
                                    placeholder="Select Categories"
                                    ng-model="taskInfo.tags">
                        </tags-input>
                    </div>

                </div>
            </div>
            <div class="form-group" ng-if = "!editTask">
                <button class="btn btn-primary" ng-click="toggleAssignTask()">Assign Task
                </button>
            </div>
            <div class="modal-body" style="height: 500px; overflow-y: scroll; overflow-x: hidden;" ng-show="assignTask">
                <div class="row">
                    <div class="col-md-12">
                        <div id="menu1" class="tab-pane fade in active ui-widget">

                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <strong>
                                      <span class="glyphicon glyphicon-th"></span> ACTOR INFORMATION
                                      </strong>
                                </div>
                                <div class="panel-body">

                                    <div class="form-group">
                                        <label>Actor </label>
                                        <div class="form-group chosen-full-container" style="margin-bottom:10px;">
                                            <select chosen
                                                    class="form-control"
                                                    data-placeholder-text-single="'Select Actor'"
                                                    ng-model="activity.responseActorId"
                                                    ng-options="actor.id as displayActorName(actor) for actor in users">
                                            </select>
                                        </div>
                                    </div>
                                        <a href="" ng-click="quickAddUser()">Add New Actor</a>
                                </div>
                            </div>
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <strong>
                                  <span class="glyphicon glyphicon-th"></span> BASIC INFORMATION
                                </strong>
                                </div>

                                <div class="panel-body">
                                    <!-- <div class="form-group">
                                        <label> Task </label><span style="color: red" title="Required"> *</span>
                                        <div class="form-group chosen-full-container" style="margin-bottom:10px;">
                                            <select chosen
                                                    class="form-control"
                                                    data-placeholder-text-single="'Select Task'"
                                                    ng-disabled = "true"
                                                    ng-model="activity.taskListId"
                                                    ng-options="task.id as task.title for task in tasks">
                                            </select>
                                        </div>
                                        <a href="" ng-click="addTaskItem()"><i class=""> Create New Task </i></a>
                                    </div> -->

                                    <div class="form-group">
                                        <label> Description </label>
                                        <input class="form-control" ng-model="activity.description">
                                    </div>
                                    <div class="form-group">
                                        <label> Responsibility Level</label>
                                        <div class="form-group chosen-full-container" style="margin-bottom:10px;">
                                            <select chosen
                                                    class="form-control"
                                                    data-placeholder-text-single="'Select Level'"
                                                    ng-model="activity.responsibility_level"
                                                    ng-options="role.name as role.name for role in roles">
                                            </select>
                                        </div>
                                        <a ng-click="addResponsibility()">Create Responsibility Level</a>
                                            
                                    </div>
                                </div>
                            </div>

                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <strong>
                                                <span class="glyphicon glyphicon-th"></span> ROLE INFORMATION
                                            </strong>
                                </div>
                                <div class="panel-body">
                                    <div class="form-group">
                                        <label> Organization </label>
                                        <div class="form-group chosen-full-container" style="margin-bottom:10px;">
                                            <select chosen
                                                    class="form-control"
                                                    data-placeholder-text-single="'Select Organization'"
                                                    ng-model="activity.organizationId"
                                                    ng-options="org.id as org.name for org in organizations">
                                            </select>
                                        </div>
                                        <a href="" ng-click="addOrg()"><i class=""> Create New Organization </i></a>
                                    </div>
                                    <div class="form-group">
                                        <label> Department </label>
                                        <div class="form-group chosen-full-container" style="margin-bottom:10px;">
                                            <select chosen
                                                    class="form-control"
                                                    data-placeholder-text-single="'Select Department'"
                                                    ng-model="activity.departmentId"
                                                    ng-options="dpt.id as dpt.name for dpt in departments">
                                            </select>
                                        </div>
                                        <a href="" ng-click="addDepartment()"><i class=""> Create New Department </i></a>
                                    </div>
                                    <div class="form-group">
                                        <label> Role </label>
                                        <div class="form-group chosen-full-container" style="margin-bottom:10px;">
                                            <select chosen
                                                    class="form-control"
                                                    data-placeholder-text-single="'Select Role'"
                                                    ng-model="activity.roleId"
                                                    ng-options="role.id as role.name for role in roles">
                                            </select>
                                        </div>
                                        <a href="" ng-click="addRole()"><i class=""> Create New Role </i></a>
                                    </div>
                                </div>
                            </div>
                            

                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    Additional Info
                                </div>

                                <div class="panel-body">

                                    <div class="form-group">
                                        <label> Response Time (minutes)</label>
                                        <input class="form-control" type="number" ng-model="activity.response_time">
                                        <!-- <div uib-timepicker ng-model="activity.response_time" show-meridian="ismeridian"></div> -->
                                    </div>

                                    <div class="form-group">
                                        <label> Completion Time (minutes)</label>
                                        <input class="form-control" type="number" ng-model="activity.completion_time">
                                       <!-- <div uib-timepicker ng-model="activity.completion_time" show-meridian="ismeridian"></div> -->
                                    </div>

                                    <div class="form-group">
                                        <label> Backup Actor </label>
                                        <div class="form-group chosen-full-container">
                                            <select chosen
                                                    class="form-control"
                                                    data-placeholder-text-single="'Select Actor'"
                                                    ng-model="activity.backupActorId"
                                                    ng-options="actor.id as displayActorName(actor) for actor in users">
                                            </select>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label> Accountable Actor </label>
                                        <div class="form-group chosen-full-container">
                                            <select chosen
                                                    class="form-control"
                                                    data-placeholder-text-single="'Select Actor'"
                                                    ng-model="activity.accountableActorId"
                                                    ng-options="actor.id as displayActorName(actor) for actor in users">
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal-footer">
            <button class="btn btn-info" data-dismiss="modal">Cancel</button>
            <button class="btn btn-success" ng-click="submit()" ng-hide="viewTask">Save</button>
        </div>
    </div>
  </div>
</div>
