<div class="page" ng-controller="actionPlanCtrl">
    <section class="panel panel-default">
        <div class="panel-heading">
        <strong>
        	<span class="glyphicon glyphicon-th"></span> Action Plan Library</strong>
        	<div class="pull-right header-buttons">
        	 <button ng-click="createNewActionPlan()" class="btn btn-success btn-sm"><i class="fa fa-plus"></i> ADD</button>
        	</div>
        </div>
        <div class="panel-body">
          <div class="table-responsive" style="width: 100%;">
            <table  st-pipe="planTable" st-table="plans" class="table table-bordered table-striped table-responsive">
                <thead>
                    <tr>
                        <th class="col-md-1" st-sort="name">Name</th>
                        <th class="col-md-1" st-sort="type">Incident Type</th>
                        <th class="col-md-1" st-sort="scenario"> Scenario</th>
                        <th class="col-md-1" st-sort="description"> Description</th>
                        <th class="col-md-1" st-sort="isComplete"> Status</th>
                        <th class="col-md-1" st-sort="actCount"> Total Tasks</th>
                        <th class="col-md-1" st-sort="createdAt">Date Created</th>
                        <th class="col-md-1" st-sort="kind">Action Plan Type</th>
                        <th class="col-md-2"> Actions</th>
                    </tr>
                    <tr>
                     <th class="search-group"><i class="fa fa-search"></i><input class="form-control search-field" placeholder="Search" st-search="name"/>
                    </th>
                    <th class="search-group"><i class="fa fa-search"></i><input class="form-control search-field" placeholder="Search"
                      st-search="type"/>
                  </th>
                  <th class="search-group"><i class="fa fa-search"></i><input class="form-control search-field" placeholder="Search"
                      st-search="scenario"/>
                  </th>
                  <th class="search-group"><i class="fa fa-search"></i><input class="form-control search-field" placeholder="Search"
                      st-search="Description"/>
                  </th>
                  <th></th>
                  <th></th>
                  <th class="search-group"><i class="fa fa-search"></i><input class="form-control search-field" placeholder="Search"
                      st-search="createdAt"/>
                  </th>
                  <th class="search-group"><i class="fa fa-search"></i><input class="form-control search-field" placeholder="Search"
                      st-search="kind"/>
                  </th>
                  <th></th>
                    </tr>
                </thead>

                  <tbody>
                    <tr ng-repeat="plan in plans ">
                        <td>{{plan.name}}</td>
                        <td>{{plan.type}}</td>
                        <td>{{plan.scenario.name}}</td>
                        <td>{{plan.description}}</td>
                        <td>{{plan.isComplete == true ? 'Complete' : 'Draft'}}</td>
                        <td>{{plan.actCount}}</td>
                        <td>{{ plan.createdAt | date: 'HH:mm dd-MM-yyyy' }}</td>
                        <td>
                            <span ng-if = "plan.kind == 'activities'">
                                Activities
                            </span>
                            <span ng-if = "plan.kind == 'agendaPoints'">
                                Agenda Points
                            </span>
                        </td>
                        <td>
                        <button title="View Plan" class="btn btn-sm btn-primary" ng-click="viewPlan(plan.id)">
                            <span class="fa fa-television"></span>
                        </button>
                            <!-- <a title=" Quick Edit" href="#/settings/action-plans/create/{{plan.id}}" class="btn btn-sm btn-info">
                        	   <span class="glyphicon glyphicon-edit"></span>
                            </a> -->
                            <!--Edit plan -->
                            <button title="Edit Plan" ng-click="editNewPlan(plan.id)" class="btn btn-sm btn-success">
                                <span class="glyphicon glyphicon-copyright-mark"></span>
                            </button>
                            <!-- Print PLan -->
                            <button title="Print Plan" class="btn btn-sm btn-success" ng-click="printPlan(plan)">
                                <span class="glyphicon glyphicon-print"></span>
                            </button>
                            <!--Edit plan -->

                            <button title="Copy Plan" class="btn btn-sm btn-success" ng-click="clonePlan(plan)">
                                <span class="fa fa-clone"></span>
                            </button>
                            <button title="Delete Plan" class="btn btn-sm btn-danger" ng-click="delete($index,plan)" confirm = "Are you sure you want to DELETE  '{{plan.name}}' ?">
                               <span class="glyphicon glyphicon-remove-sign"></span>
                            </button>
                        </td>
                    </tr>
                  </tbody>
                  <tbody ng-show="isLoading">
                    <tr>
                      <td colspan="4" class="text-center">Loading ... </td>
                    </tr>
                  </tbody>
                  <tfoot class="table table-striped table-responsive">
                    <tr>
                      <td class="text-center" st-pagination="" st-items-by-page="pageItems" colspan="9">
                      </td>
                    </tr>
                  </tfoot>
                </table>
                <div class="col-md-3">
                  <select class="form-control"
                  ng-model="pageItems"
                  ng-options="item.val as item.name for item in items"
                  ng-selected="item.val === pageItems">
                </select>
              </div>
          </div>

        </div>
    </section>
</div>
