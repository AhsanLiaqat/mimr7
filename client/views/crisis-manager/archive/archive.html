<div class="page" ng-controller="archiveCtrl">
    <section class="panel panel-default">
        <div class="panel-heading">
        <strong>
            <span class="glyphicon glyphicon-th"></span> Archives</strong>
        </div>
        <div class="panel-body">

            <div class="table-responsive">
                    <thead>
                <table  st-pipe="Archive" st-table="incidents" class="table table-bordered table-striped table-responsive">
                        <tr>
                            <th class="col-md-2" st-sort="name">Name</th>
                            <th class="col-md-2" st-sort="category.name">Incident Type</th>
                            <th class="col-md-2" st-sort="team">Incident Team</th>
                            <th>Action Plan</th>
                            <th class="col-md-2" st-sort="closed_time">Created/Closed Date</th>
                            <th class="col-md-3">Actions</th>
                        </tr>
                        <tr>

                           <th>
                            <input class="form-control" placeholder="Search Name" st-search="name"/>
                        </th>
                        <th>
                        <input class="form-control" placeholder="Search category"
                          st-search="category.name"/>
                      </th>
                      <th>
                          <input class="form-control" placeholder="Search team"
                          st-search="team"/>
                      </th>
                      <th>
                          <input class="form-control" placeholder="Search Plan"
                          st-search="action_plan.name"/>
                      </th>
                      <th>
                          <input class="form-control" placeholder="Search Date"
                          st-search="createdAt"/>
                      </th>
                      <th></th>
                  </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="incident in incidents">
                            <td>{{incident.name}}</td>
                            <td>{{incident.category.name}}</td>
                            <td>{{incident.team}}</td>
                            <td>{{incident.incident_plans[0].action_plan.name}}</td>
                            <td><span>{{incident.createdAt | date:'HH:mm dd-MM-yyyy'}} <span style="color: green">Created</span></span><br>
                            <span>{{incident.closed_time | date:'HH:mm dd-MM-yyyy'}} <span style="color: red">Closed</span></span>
                            </td>
                            <td>
                                <a class="btn btn-sm btn-primary" ng-click="openTimeLine($index)">
                                  <span>
                                    <i class="fa fa-align-center fa-lg" aria-hidden="true"></i>
                                  </span>
                                </a>
                                <button
                                    class="btn btn-sm btn-primary"
                                    ng-click="statusReport($index)">
                                  <span>
                                    <i class="fa fa-file-text-o fa-lg" aria-hidden="true"></i>
                                  </span>
                                </button>
                                 <a class="btn btn-danger btn-sm" ng-click="deleteArchive(incident, $index)">
                                <span class="glyphicon glyphicon-remove-sign"></span>
                                </a>
                                <a href="#/incident/edit/{{incident.id}}" class="btn btn-sm btn-info" ng-hide="incident.active === 'Closed'">
                            	    <span class="glyphicon glyphicon-edit"></span>
                                </a>
                            </td>

                        </tr>

                    </tbody>
                    <tbody ng-show="isLoading">
                      <tr>
                        <td colspan="4" class="text-center">Loading ... </td>
                    </tr>
                </tbody>
                <tfoot class="table table-striped table-responsive">
                  <tr>
                    <td class="text-center" st-pagination="" st-items-by-page="pageItems" colspan="7">
                    </td>
                </tr>
            </tfoot>
        </table>
        <div class="col-md-3">
          <select class="form-control"
          ng-model="pageItems"
          ng-options="item.val as item.name for item in items"
          ng-selected="item.val === pageItems">
      </select>
  </div>
            </div>

        </div>
    </section>


</div>
